<!DOCTYPE html>
    <html lang="en">
            <head>
                <title>The Lunchbox - Menu</title>
                <meta charset="utf-8">
                <link rel="stylesheet" href="style.css">
                <meta name="viewport" content="width=device-width,initial-scale=0.75">
                <link rel="icon" type="image/x-icon" href="content/favicon.png">
                <script type="module">
                    //imports and configs
                    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
                    import { getFirestore, collection, query, orderBy, limit, onSnapshot } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";
                    document.addEventListener("DOMContentLoaded", function () {
                        const firebaseConfig = {
                            apiKey: "AIzaSyCH0Zyzj5tukPUZacOM_xJZk3wFLQIvgNw",
                            authDomain: "lunchbox-60fb5.firebaseapp.com",
                            databaseURL: "https://lunchbox-60fb5-default-rtdb.firebaseio.com",
                            projectId: "lunchbox-60fb5",
                            storageBucket: "lunchbox-60fb5.appspot.com",
                            messagingSenderId: "534903316915",
                            appId: "1:534903316915:web:e7b8e503540d234632ebc6",
                            measurementId: "G-TD5GSSYSSY"
                        };
                        //initialize firebase
                        const app = initializeApp(firebaseConfig);
                        const db = getFirestore(app);
                        const menuCollectionRef = collection(db, 'menu');
                        //create a query to get the most recent menu document
                        const queryRef = query(menuCollectionRef, orderBy('timestamp', 'desc'), limit(1));
                        //set up the snapshot listener
                        onSnapshot(queryRef, updateMenu);
                        function updateMenu(snapshot) {
                            if (!snapshot.empty) {
                                const mostRecentDocument = snapshot.docs[0];
                                const menuDocument = mostRecentDocument.data();
                                //update the HTML 
                                updateMenuItem('date1', 'tuesday_date');
                                updateMenuItem('entree1', 'tuesday_entree');
                                updateMenuItem('soup1', 'tuesday_soup');
                                updateMenuItem('salad1', 'tuesday_salad');
                                updateMenuItem('side1', 'tuesday_side');
                                updateMenuItem('dessert1', 'tuesday_dessert');
                                updateMenuItem('closed1', 'tuesday_closed');
                                updateMenuItem('date2', 'wednesday_date');
                                updateMenuItem('entree2', 'wednesday_entree');
                                updateMenuItem('soup2', 'wednesday_soup');
                                updateMenuItem('salad2', 'wednesday_salad');
                                updateMenuItem('side2', 'wednesday_side');
                                updateMenuItem('dessert2', 'wednesday_dessert');
                                updateMenuItem('closed2', 'wednesday_closed');
                                updateMenuItem('date3', 'thursday_date');
                                updateMenuItem('entree3', 'thursday_entree');
                                updateMenuItem('soup3', 'thursday_soup');
                                updateMenuItem('salad3', 'thursday_salad');
                                updateMenuItem('side3', 'thursday_side');
                                updateMenuItem('dessert3', 'thursday_dessert');
                                updateMenuItem('closed3', 'thursday_closed');
                                //update all items
                                function updateMenuItem(elementId, dataKey) {
                                    if (menuDocument[dataKey] !== undefined) {
                                        document.getElementById(elementId).innerText = menuDocument[dataKey];
                                    } 
                                    else {
                                        console.error(`${dataKey} is undefined in menuDocument`);
                                    }
                                }
                            } 
                            else {
                                console.log('No documents found in the "menu" collection.');
                            }
                        }
                    });
                </script>
            </head>
            <body>
                <nav>
                    <div class="nav-on-the-left">
                        <a href="index.html"><img src="content/lunchboxNoText.png" height="95px" width="145px" alt="lunchBoxLogoHeader"></a>
                    </div>
                    <div class="nav-on-the-right">
                        <ul>
                        <li><a href="index.html">Menu</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </div>
                </nav>
                <main>
                    <div class="bigLogo-container">
                        <img id="homePageLunchboxLogo" src="content/lunchboxWithText.png" alt="homePageLunchboxLogo">
                    </div>
                    <div class="menu-container">
                        <div class="menu">
                            <h1 id="menuCard" style="text-align:center;">TUESDAY</h1>
                            <h3 id="date1" style="text-align:center;">{date}</h3>
                            <h1 style="color:#335879">ENTREE</h1> 
                            <h3 id="entree1" class="menu-items-spaced-over">{entree}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SOUPS</h1> 
                            <h3 id="soup1" class="menu-items-spaced-over">{soup}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SALADS</h1> 
                            <h3 id="salad1" class="menu-items-spaced-over">{salad}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SIDES</h1> 
                            <h3 id="side1" class="menu-items-spaced-over">{side}</h3>
                            <div class="divider"></div> 
                            <h1 style="color:#335879">DESSERTS</h1> 
                            <h3 id="dessert1" class="menu-items-spaced-over">{dessert}</h3>
                            <div class="divider"></div>
                            <h3 id="closed1" style="color:grey"></h3>
                        </div>
                        <div class="menu">
                            <h1 id="menuCard" style="text-align:center;">WEDNESDAY</h1>
                            <h3 id="date2" style="text-align:center;">{date}</h3>
                            <h1 style="color:#335879">ENTREE</h1> 
                            <h3 id="entree2" class="menu-items-spaced-over">{entree}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SOUPS</h1> 
                            <h3 id="soup2" class="menu-items-spaced-over">{soup}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SALADS</h1> 
                            <h3 id="salad2" class="menu-items-spaced-over">{salad}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SIDES</h1> 
                            <h3 id="side2" class="menu-items-spaced-over">{side}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">DESSERTS</h1> 
                            <h3 id="dessert2" class="menu-items-spaced-over">{dessert}</h3>
                            <div class="divider"></div>
                            <h3 id="closed2" style="color:grey"></h3>
                        </div>
                        <div class="menu">
                            <h1 id="menuCard" style="text-align:center;">THURSDAY</h1>
                            <h3 id="date3" style="text-align:center;">{date}</h3>
                            <h1 style="color:#335879">ENTREE</h1> 
                            <h3 id="entree3" class="menu-items-spaced-over">{entree}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SOUPS</h1> 
                            <h3 id="soup3" class="menu-items-spaced-over">{soup}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SALADS</h1> 
                            <h3 id="salad3" class="menu-items-spaced-over">{salad}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">SIDES</h1> 
                            <h3 id="side3" class="menu-items-spaced-over">{side}</h3>
                            <div class="divider"></div>
                            <h1 style="color:#335879">DESSERTS</h1> 
                            <h3 id="dessert3" class="menu-items-spaced-over">{dessert}</h3>
                            <div class="divider"></div>
                            <h3 id="closed3" style="color:grey"></h3>
                        </div>
                      </div>
                    <div class="card-container-WHATSINCLUDED">
                        <div class="card-WHATSINCLUDED">
                            <h2>What's Included In An $8 Meal?</h2>
                            <p><span class="info-label-WHATSINCLUDED">Entree (1 portion)</span></p>
                            <p><span class="info-label-WHATSINCLUDED">Sides (Choose 2) (Soups & Salads are considered a side)</span></p>
                            <p><span class="info-label-WHATSINCLUDED">Dessert (Your choice of 1)</span></p>
                            <p><span class="info-label-WHATSINCLUDED">Dinner Roll (1 roll)</span></p>
                            <p><span class="info-label-WHATSINCLUDED">Drink (Unsweetened Tea, Lemonade, or Water)</span></p>
                        </div>
                    </div>
                    <div class="card-container-COMMON">
                        <div class="card-COMMON">
                            <h2>About</h2>
                            <p><span class="info-label-COMMON">Opening Hours:</span> 10:15 AM - 1:00 PM</p>
                            <p><span class="info-label-COMMON">Availability:</span> Open to the public</p>
                            <p><span class="info-label-COMMON">Location:</span> Please enter through the main entrance at SICTC and the restaurant is located on the left.</p>
                            <p><span class="info-label-COMMON">Reservations:</span> Requested for groups of 6 and larger</p>
                        </div>
                        <div class="card-COMMON">
                            <h2>Accepted Payments</h2>
                            <p><span class="info-label-COMMON">Accepted Payments:</span> CASH ONLY </p>
                            <p><span class="info-label-COMMON"></span><img src="content/cash.png" height="150px" width="150px" alt="cash"><img src="content/noCard.png" height="150px" width="150px" alt="noCard"></p>
                        </div>
                        <div class="card-COMMON">
                            <h2>A La Carte Food Prices</h2>
                            <p><span class="info-label-COMMON">Entree:</span> $3.00</p>
                            <p><span class="info-label-COMMON">Sides and Desserts:</span> $2.00</p>
                            <p><span class="info-label-COMMON">Cookie:</span> $1.00</p>
                            <p><span class="info-label-COMMON">Dinner Roll:</span> $.50</p>
                        </div>
                    </div>
                    <div class="thank-you">
                        <h1>Thanks For Your Continued Support 👍</h1>
                    </div>
                </main>
                <footer>
                    &copy; <a class="no-style-link" href="https://github.com/maekyngrigs10">Maekyn Grigsby</a> & <a class="no-style-link" href="https://github.com/tytichenor">Ty Tichenor</a><br>
                    The Lunchbox <br>
                    1901 Lynch Rd, Evansville, IN 47711 <br>
                    <a href="https://sictc.evscschools.com/"><img src="content/footerSICTC.png" style="width:150px;height:75px;" alt="footerSICTC"><a></a>
                </footer>

            </body>
    </html>